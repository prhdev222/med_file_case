# Software Requirements Specification (SRS)à¸•à¹ˆà¸­à¸‚à¸¢à¸²à¸¢
## Case Management Module (Simplified Version)
### à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¹„à¸Ÿà¸¥à¹Œà¹à¸œà¸™à¸à¸­à¸²à¸¢à¸¸à¸£à¸à¸£à¸£à¸¡ à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸ªà¸‡à¸†à¹Œ

---

## 1. à¸šà¸—à¸™à¸³

### 1.1 à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ
à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ˆà¸±à¸”à¸—à¸³à¸‚à¸¶à¹‰à¸™à¹€à¸à¸·à¹ˆà¸­à¸à¸³à¸«à¸™à¸”à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¸—à¸²à¸‡à¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œà¸ªà¸³à¸«à¸£à¸±à¸š **Case Management Module (à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¸‡à¹ˆà¸²à¸¢)** à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸‚à¸¢à¸²à¸¢à¸‚à¸­à¸‡à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¹„à¸Ÿà¸¥à¹Œà¹à¸œà¸™à¸à¸­à¸²à¸¢à¸¸à¸£à¸à¸£à¸£à¸¡à¹€à¸”à¸´à¸¡ à¹€à¸à¸·à¹ˆà¸­à¹€à¸à¹‡à¸šà¸ªà¸–à¸´à¸•à¸´ cases à¹ƒà¸«à¸¡à¹ˆà¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸œà¸¥à¹ƒà¸™ analytics dashboard

### 1.2 à¸‚à¸­à¸šà¹€à¸‚à¸•à¸‚à¸­à¸‡ Module
- à¸£à¸°à¸šà¸šà¸šà¸±à¸™à¸—à¸¶à¸ cases à¹ƒà¸«à¸¡à¹ˆ (à¹€à¸‰à¸à¸²à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™)
- à¸£à¸°à¸šà¸š analytics dashboard à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸–à¸´à¸•à¸´à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢
- à¸£à¸°à¸šà¸šà¹à¸ªà¸”à¸‡à¸œà¸¥à¸ªà¸²à¸˜à¸²à¸£à¸“à¸° (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ login)
- à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸³à¸«à¸£à¸±à¸š admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™

### 1.3 à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢
- **à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸±à¹ˆà¸§à¹„à¸› (Public)** - à¸”à¸¹ analytics dashboard (à¹„à¸¡à¹ˆà¹€à¸«à¹‡à¸™ HN/à¸Šà¸·à¹ˆà¸­)
- **Admin** - à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ cases (à¹€à¸«à¹‡à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§)
- **à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™** - à¹€à¸•à¸£à¸µà¸¢à¸¡à¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸š integration à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•

### 1.4 à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š
- **à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸‡à¹ˆà¸²à¸¢** - à¹€à¸à¹‡à¸šà¹€à¸‰à¸à¸²à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸³à¹€à¸›à¹‡à¸™
- **à¸‚à¸¢à¸²à¸¢à¹„à¸”à¹‰** - à¹€à¸•à¸£à¸µà¸¢à¸¡à¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸š integration à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•
- **à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢** - à¸›à¸à¸›à¹‰à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥
- **à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹„à¸”à¹‰** - dashboard à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°

---

## 2. à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¸—à¸±à¹ˆà¸§à¹„à¸›

### 2.1 à¸ à¸²à¸à¸£à¸§à¸¡à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š
Case Management Module à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸‚à¸¢à¸²à¸¢à¹€à¸šà¸²à¹† à¸—à¸µà¹ˆà¸¡à¸¸à¹ˆà¸‡à¹€à¸™à¹‰à¸™:
- à¸šà¸±à¸™à¸—à¸¶à¸ new cases à¸à¸·à¹‰à¸™à¸à¸²à¸™ (HN + à¸§à¸±à¸™à¸—à¸µà¹ˆ + à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™)
- à¹à¸ªà¸”à¸‡à¸ªà¸–à¸´à¸•à¸´à¹à¸šà¸š aggregated (à¹„à¸¡à¹ˆà¹€à¸›à¸´à¸”à¹€à¸œà¸¢à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§)
- à¹€à¸•à¸£à¸µà¸¢à¸¡à¸„à¸§à¸²à¸¡à¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸‚à¸¢à¸²à¸¢à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•

### 2.2 à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸šà¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡
- **Shared Navigation** - à¹€à¸à¸´à¹ˆà¸¡à¹€à¸¡à¸™à¸¹ "à¸ªà¸–à¸´à¸•à¸´à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢" à¹ƒà¸™à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡
- **Department Integration** - à¹ƒà¸Šà¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ departments à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡
- **Admin Access** - à¹€à¸‰à¸à¸²à¸° admin à¹€à¸‚à¹‰à¸²à¹„à¸”à¹‰à¸«à¸™à¹‰à¸²à¸ˆà¸±à¸”à¸à¸²à¸£

---

## 3. à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¹€à¸‰à¸à¸²à¸° (Functional Requirements)

### 3.1 à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸ Cases (Admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™)

#### 3.1.1 à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™
- **FR-001**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸ HN à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹„à¸”à¹‰
- **FR-002**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¹„à¸”à¹‰
- **FR-003**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¸‚à¸­à¸‡ case à¹„à¸”à¹‰
- **FR-004**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸£à¸°à¸šà¸¸à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™ "new case" à¹„à¸”à¹‰
- **FR-005**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸à¸´à¹ˆà¸¡à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸±à¹‰à¸™à¹† à¹„à¸”à¹‰ (optional)

#### 3.1.2 à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- **FR-006**: Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ case à¹„à¸”à¹‰
- **FR-007**: Admin à¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¸à¸¥ case à¹„à¸”à¹‰
- **FR-008**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸šà¸±à¸™à¸—à¸¶à¸à¸§à¹ˆà¸²à¹ƒà¸„à¸£à¹€à¸›à¹‡à¸™à¸„à¸™à¸šà¸±à¸™à¸—à¸¶à¸ (audit)
- **FR-009**: à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸ HN à¸‹à¹‰à¸³à¹ƒà¸™à¸§à¸±à¸™à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™

### 3.2 Public Analytics Dashboard

#### 3.2.1 à¸ªà¸–à¸´à¸•à¸´à¸«à¸¥à¸±à¸ (à¹„à¸¡à¹ˆà¹€à¸›à¸´à¸”à¹€à¸œà¸¢ PII)
- **FR-010**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ new cases à¸£à¸²à¸¢à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ
- **FR-011**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ new cases à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™
- **FR-012**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ new cases à¸£à¸²à¸¢ 3à¹€à¸”à¸·à¸­à¸™
- **FR-013**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ new cases à¸£à¸²à¸¢ 6à¹€à¸”à¸·à¸­à¸™
- **FR-014**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ new cases à¸£à¸²à¸¢à¸›à¸µ
- **FR-015**: à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸šà¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸² (% change)

#### 3.2.2 à¸à¸²à¸£à¸à¸£à¸°à¸ˆà¸²à¸¢à¸•à¸²à¸¡à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™
- **FR-016**: à¹à¸ªà¸”à¸‡à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™ cases à¹à¸•à¹ˆà¸¥à¸°à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™ (pie chart)
- **FR-017**: à¹à¸ªà¸”à¸‡ bar chart à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™
- **FR-018**: à¹à¸ªà¸”à¸‡ trends à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™ (line chart)

#### 3.2.3 à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Dashboard
- **FR-019**: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸±à¹ˆà¸§à¹„à¸›à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹„à¸”à¹‰à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ login
- **FR-020**: à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹„à¸”à¹‰ (dropdown)
- **FR-021**: à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¹€à¸‰à¸à¸²à¸°à¹„à¸”à¹‰ (optional filter)
- **FR-022**: à¹à¸ªà¸”à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”

### 3.3 Admin Management

#### 3.3.1 à¸«à¸™à¹‰à¸²à¸ˆà¸±à¸”à¸à¸²à¸£ Cases
- **FR-023**: à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£ cases à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸£à¸§à¸¡ HN)
- **FR-024**: à¸„à¹‰à¸™à¸«à¸²à¹‚à¸”à¸¢ HN à¹„à¸”à¹‰
- **FR-025**: à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¹à¸¥à¸°à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰
- **FR-026**: à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™ total cases

#### 3.3.2 à¸à¸²à¸£ Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- **FR-027**: Admin à¸ªà¸²à¸¡à¸²à¸£à¸– export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¹‡à¸™ CSV à¹„à¸”à¹‰
- **FR-028**: Export file à¸•à¹‰à¸­à¸‡à¸¡à¸µ HN à¸ªà¸³à¸«à¸£à¸±à¸š admin
- **FR-029**: à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¸­à¸à¸Šà¹ˆà¸§à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸³à¸«à¸£à¸±à¸š export à¹„à¸”à¹‰

### 3.4 Future Integration Preparation

#### 3.4.1 HN Linking
- **FR-030**: à¹€à¸•à¸£à¸µà¸¢à¸¡ database schema à¸ªà¸³à¸«à¸£à¸±à¸š external links
- **FR-031**: à¹€à¸à¹‡à¸š HN à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆ linkable à¹„à¸”à¹‰
- **FR-032**: à¹€à¸•à¸£à¸µà¸¢à¸¡ API endpoints à¸ªà¸³à¸«à¸£à¸±à¸š external systems

---

## 4. à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¸”à¹‰à¸²à¸™à¹€à¸—à¸„à¸™à¸´à¸„ (Non-Functional Requirements)

### 4.1 à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸”à¹‰à¸²à¸™à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸
- **NFR-001**: Dashboard à¹‚à¸«à¸¥à¸”à¹„à¸”à¹‰à¹ƒà¸™à¹€à¸§à¸¥à¸²à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 3 à¸§à¸´à¸™à¸²à¸—à¸µ
- **NFR-002**: à¸£à¸­à¸‡à¸£à¸±à¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 100 à¸„à¸™ (public access)
- **NFR-003**: à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸ case à¹ƒà¸«à¸¡à¹ˆà¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 2 à¸§à¸´à¸™à¸²à¸—à¸µ

### 4.2 à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
- **NFR-004**: Public dashboard à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥
- **NFR-005**: HN à¸•à¹‰à¸­à¸‡à¸–à¸¹à¸à¹€à¸‚à¹‰à¸²à¸£à¸«à¸±à¸ªà¹ƒà¸™à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- **NFR-006**: Admin functions à¸•à¹‰à¸­à¸‡à¸¡à¸µ authentication
- **NFR-007**: à¸¡à¸µ audit trail à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚/à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### 4.3 à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸”à¹‰à¸²à¸™à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- **NFR-008**: Interface à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸‡à¹ˆà¸²à¸¢ (minimal clicks)
- **NFR-009**: à¸£à¸­à¸‡à¸£à¸±à¸š mobile devices (responsive)
- **NFR-010**: à¹ƒà¸Šà¹‰à¸ à¸²à¸©à¸²à¹„à¸—à¸¢à¹ƒà¸™à¸ªà¹ˆà¸§à¸™ UI

### 4.4 à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸”à¹‰à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- **NFR-011**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 10,000 cases
- **NFR-012**: Backup à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸£à¸²à¸¢à¸§à¸±à¸™
- **NFR-013**: Data retention à¹„à¸¡à¹ˆà¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸² 3 à¸›à¸µ

---

## 5. Database Schema (Simplified)

### 5.1 à¸•à¸²à¸£à¸²à¸‡à¸«à¸¥à¸±à¸

#### 5.1.1 patient_cases_simple
```sql
CREATE TABLE patient_cases_simple (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    hn_encrypted TEXT NOT NULL,        -- à¹€à¸‚à¹‰à¸²à¸£à¸«à¸±à¸ª HN
    department_id INTEGER NOT NULL,    -- FK to departments
    case_date DATE NOT NULL,
    case_type VARCHAR(20) DEFAULT 'new_case',
    notes TEXT,                        -- à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸±à¹‰à¸™à¹† (optional)
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER,                -- FK to admin_users
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    
    FOREIGN KEY (department_id) REFERENCES departments(id),
    FOREIGN KEY (created_by) REFERENCES admin_users(id),
    UNIQUE(hn_encrypted, case_date)    -- à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ duplicate
);

-- Indexes for performance
CREATE INDEX idx_simple_cases_dept_date ON patient_cases_simple(department_id, case_date);
CREATE INDEX idx_simple_cases_date ON patient_cases_simple(case_date);
```

#### 5.1.2 case_audit_simple
```sql
CREATE TABLE case_audit_simple (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    case_id INTEGER NOT NULL,
    action VARCHAR(20) NOT NULL,       -- 'CREATE', 'UPDATE', 'DELETE'
    user_id INTEGER,
    ip_address VARCHAR(45),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (case_id) REFERENCES patient_cases_simple(id),
    FOREIGN KEY (user_id) REFERENCES admin_users(id)
);
```

### 5.2 Views à¸ªà¸³à¸«à¸£à¸±à¸š Analytics

#### 5.2.1 public_case_stats
```sql
CREATE VIEW public_case_stats AS
SELECT 
    d.name as department_name,
    d.code as department_code,
    DATE(pcs.case_date) as case_date,
    COUNT(*) as case_count,
    strftime('%Y-%W', pcs.case_date) as year_week,
    strftime('%Y-%m', pcs.case_date) as year_month
FROM patient_cases_simple pcs
JOIN departments d ON pcs.department_id = d.id
WHERE pcs.is_deleted = FALSE
GROUP BY d.id, DATE(pcs.case_date);
```

#### 5.2.2 weekly_summary
```sql
CREATE VIEW weekly_summary AS
SELECT 
    d.name as department_name,
    d.code as department_code,
    strftime('%Y-W%W', pcs.case_date) as week_year,
    COUNT(*) as total_cases
FROM patient_cases_simple pcs
JOIN departments d ON pcs.department_id = d.id
WHERE pcs.is_deleted = FALSE
GROUP BY d.id, strftime('%Y-W%W', pcs.case_date);
```

---

## 6. API Endpoints (Simple)

### 6.1 Public APIs (No Authentication)

#### 6.1.1 Dashboard Statistics
```
GET /api/public/stats?period=month&department=all
Response: {
  "total_cases": 150,
  "period": "month",
  "previous_total": 130,
  "change_percent": 15.4,
  "departments": [
    {"code": "dm", "name": "à¸«à¸™à¹ˆà¸§à¸¢à¹€à¸šà¸²à¸«à¸§à¸²à¸™", "count": 45},
    {"code": "ckd", "name": "à¸«à¸™à¹ˆà¸§à¸¢à¹„à¸•à¹€à¸£à¸·à¹‰à¸­à¸£à¸±à¸‡", "count": 30}
  ]
}
```

#### 6.1.2 Trends Data
```
GET /api/public/trends?period=6months&department=dm
Response: {
  "labels": ["2024-01", "2024-02", "2024-03", "2024-04", "2024-05", "2024-06"],
  "data": [25, 30, 28, 35, 40, 45],
  "department": "dm"
}
```

### 6.2 Admin APIs (Authentication Required)

#### 6.2.1 Create Case
```
POST /api/admin/cases
Authorization: Bearer <token>
Content-Type: application/json

{
  "hn": "1234567",
  "department_id": 1,
  "case_date": "2024-01-15",
  "notes": "à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹ƒà¸«à¸¡à¹ˆ"
}
```

#### 6.2.2 List Cases (with PII)
```
GET /api/admin/cases?limit=50&offset=0&department=dm
Authorization: Bearer <token>

Response: {
  "cases": [
    {
      "id": 1,
      "hn": "1234567",
      "department_name": "à¸«à¸™à¹ˆà¸§à¸¢à¹€à¸šà¸²à¸«à¸§à¸²à¸™", 
      "case_date": "2024-01-15",
      "notes": "à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹ƒà¸«à¸¡à¹ˆ"
    }
  ],
  "total": 150
}
```

---

## 7. User Interface Specifications

### 7.1 Public Dashboard

#### 7.1.1 à¸«à¸™à¹‰à¸²à¹à¸£à¸ (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ Login)
```
ğŸ“Š à¸ªà¸–à¸´à¸•à¸´à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹ƒà¸«à¸¡à¹ˆ - à¹à¸œà¸™à¸à¸­à¸²à¸¢à¸¸à¸£à¸à¸£à¸£à¸¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—“ï¸ à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²: [à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™ â–¼]          â”‚
â”‚ ğŸ¥ à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™: [à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” â–¼]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡ (à¹€à¸”à¸·à¸­à¸™à¸™à¸µà¹‰)
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š  â”‚ ğŸ‘¥  â”‚ ğŸ“ˆ  â”‚ ğŸ”„  â”‚
â”‚Totalâ”‚ 150 â”‚+15%â”‚ ğŸ“…  â”‚
â”‚Casesâ”‚     â”‚     â”‚     â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

ğŸ¥§ à¸à¸²à¸£à¸à¸£à¸°à¸ˆà¸²à¸¢à¸•à¸²à¸¡à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™
[Pie Chart]

ğŸ“ˆ à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡ 6 à¹€à¸”à¸·à¸­à¸™à¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡  
[Line Chart]

ğŸ“Š à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™
[Bar Chart]

à¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”: 15/01/2024 10:30
```

#### 7.1.2 Mobile Version
- Stack layout à¹à¸™à¸§à¸•à¸±à¹‰à¸‡
- Swipe gesture à¸ªà¸³à¸«à¸£à¸±à¸š charts
- Touch-friendly filters
- Simplified navigation

### 7.2 Admin Panel

#### 7.2.1 à¸«à¸™à¹‰à¸²à¸ˆà¸±à¸”à¸à¸²à¸£ Cases
```
ğŸ” Admin - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢

â• à¹€à¸à¸´à¹ˆà¸¡ Case à¹ƒà¸«à¸¡à¹ˆ

ğŸ” à¸„à¹‰à¸™à¸«à¸²: [_____________] ğŸ¥ à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™: [à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” â–¼]

ğŸ“‹ à¸£à¸²à¸¢à¸à¸²à¸£ Cases (à¸£à¸§à¸¡ 150 à¸£à¸²à¸¢à¸à¸²à¸£)
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚ HN       â”‚ à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™     â”‚ à¸§à¸±à¸™à¸—à¸µà¹ˆ      â”‚ Actions â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 1234567  â”‚ à¸«à¸™à¹ˆà¸§à¸¢à¹€à¸šà¸²à¸«à¸§à¸²à¸™ â”‚ 15/01/2024 â”‚ âœï¸ ğŸ—‘ï¸    â”‚
â”‚ 2  â”‚ 1234568  â”‚ à¸«à¸™à¹ˆà¸§à¸¢à¹„à¸•      â”‚ 14/01/2024 â”‚ âœï¸ ğŸ—‘ï¸    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¤ Export to CSV
```

#### 7.2.2 à¹€à¸à¸´à¹ˆà¸¡ Case à¹ƒà¸«à¸¡à¹ˆ
```
â• à¹€à¸à¸´à¹ˆà¸¡à¸œà¸¹à¹‰à¸›à¹ˆà¸§à¸¢à¹ƒà¸«à¸¡à¹ˆ

HN: [___________] *
à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™: [à¹€à¸¥à¸·à¸­à¸à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™ â–¼] *
à¸§à¸±à¸™à¸—à¸µà¹ˆ: [15/01/2024] *
à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: [_________________]

[ğŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸] [âŒ à¸¢à¸à¹€à¸¥à¸´à¸]
```

---

## 8. Security Implementation

### 8.1 Data Protection

#### 8.1.1 HN Encryption
```python
import hashlib
from cryptography.fernet import Fernet

class HNEncryption:
    def __init__(self, key):
        self.cipher = Fernet(key)
    
    def encrypt_hn(self, hn):
        """à¹€à¸‚à¹‰à¸²à¸£à¸«à¸±à¸ª HN à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¹‡à¸šà¹ƒà¸™à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"""
        return self.cipher.encrypt(hn.encode()).decode()
    
    def decrypt_hn(self, encrypted_hn):
        """à¸–à¸­à¸”à¸£à¸«à¸±à¸ª HN à¸ªà¸³à¸«à¸£à¸±à¸š admin"""
        return self.cipher.decrypt(encrypted_hn.encode()).decode()
```

#### 8.1.2 Public Data Sanitization
```python
def get_public_stats(period, department=None):
    """à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸²à¸˜à¸²à¸£à¸“à¸° - à¹„à¸¡à¹ˆà¸¡à¸µ PII"""
    query = db.session.query(
        Department.code,
        Department.name,
        func.count(PatientCaseSimple.id).label('count')
    ).join(PatientCaseSimple)
    
    # à¹„à¸¡à¹ˆ return HN à¸«à¸£à¸·à¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§
    if department:
        query = query.filter(Department.code == department)
    
    return query.group_by(Department.id).all()
```

### 8.2 Access Control

#### 8.2.1 Route Protection
```python
from functools import wraps
from flask_login import current_user

def admin_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not current_user.is_authenticated or not current_user.is_admin:
            abort(403)
        return f(*args, **kwargs)
    return decorated_function

# Usage
@app.route('/admin/cases')
@admin_required
def admin_cases():
    # à¹€à¸‰à¸à¸²à¸° admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
    pass

@app.route('/api/public/stats')  
def public_stats():
    # à¸—à¸¸à¸à¸„à¸™à¹€à¸‚à¹‰à¸²à¹„à¸”à¹‰ à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹€à¸«à¹‡à¸™ PII
    pass
```

---

## 9. Implementation Phases

### 9.1 Phase 1: Core Functionality (2-3 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)

#### Week 1:
- âœ… Database schema setup
- âœ… Basic CRUD for cases (admin only)
- âœ… HN encryption implementation

#### Week 2: 
- âœ… Public dashboard (basic charts)
- âœ… Time period filtering
- âœ… Department filtering

#### Week 3:
- âœ… Admin panel UI
- âœ… Export functionality
- âœ… Basic testing

### 9.2 Phase 2: Enhancement (1-2 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)

#### Week 4:
- âœ… Mobile responsive design
- âœ… Performance optimization
- âœ… Security hardening

#### Week 5 (Optional):
- âœ… Advanced charts
- âœ… User training
- âœ… Documentation

### 9.3 Phase 3: Future Preparation

- ğŸ“… API endpoints à¸ªà¸³à¸«à¸£à¸±à¸š external integration
- ğŸ“… HN linking infrastructure
- ğŸ“… Migration path planning

---

## 10. Testing Strategy

### 10.1 Functional Testing

#### 10.1.1 Public Dashboard
- âœ… Dashboard loads without login
- âœ… No PII displayed
- âœ… Charts render correctly
- âœ… Filters work properly
- âœ… Mobile responsive

#### 10.1.2 Admin Functions
- âœ… Admin login required
- âœ… Cases CRUD operations
- âœ… HN encryption/decryption
- âœ… Export functionality
- âœ… Audit trail logging

### 10.2 Security Testing
- âœ… No PII in public APIs
- âœ… HN encryption working
- âœ… Admin authentication
- âœ… SQL injection prevention
- âœ… XSS protection

### 10.3 Performance Testing
- âœ… Dashboard load < 3 seconds
- âœ… 100 concurrent public users
- âœ… Database query performance
- âœ… Mobile performance

---

## 11. Deployment à¹à¸¥à¸° Maintenance

### 11.1 Deployment Checklist
- [ ] Database migration script
- [ ] Encryption key generation
- [ ] Admin user setup
- [ ] Public route testing
- [ ] Backup configuration

### 11.2 Monitoring
- Database size tracking
- Public dashboard usage
- Admin activity logging
- Performance metrics
- Error logging

### 11.3 Backup Strategy
```bash
#!/bin/bash
# Daily backup script
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
cp hospital_system.db "backup/cases_${TIMESTAMP}.db"

# Keep last 30 days
find backup/ -name "cases_*.db" -mtime +30 -delete
```

---

## 12. Success Criteria

### 12.1 Functional Success
- âœ… Public dashboard accessible without login
- âœ… No PII visible to public users
- âœ… Admin can manage all cases
- âœ… HN data properly encrypted
- âœ… Export functionality working

### 12.2 Performance Success
- âœ… Dashboard loads < 3 seconds
- âœ… Supports 100+ concurrent users
- âœ… Mobile responsive
- âœ… 99.9% uptime

### 12.3 Security Success
- âœ… Zero PII leakage
- âœ… Proper authentication
- âœ… Audit trail complete
- âœ… Data encryption working

---

## 13. Future Integration Plan

### 13.1 Department Integration Points
```python
# Future API for department systems
@app.route('/api/integration/cases/<hn>')
@department_api_key_required
def get_case_by_hn(hn):
    """à¸ªà¸³à¸«à¸£à¸±à¸šà¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•"""
    # Return basic case info for linking
    # Each department builds their own detailed system
    pass
```

### 13.2 Expansion Possibilities
- **Detailed Clinical Data** - à¹à¸•à¹ˆà¸¥à¸°à¸«à¸™à¹ˆà¸§à¸¢à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸°à¸šà¸šà¸¢à¹ˆà¸­à¸¢
- **Integration APIs** - link à¸ˆà¸²à¸ HN à¹„à¸›à¸£à¸°à¸šà¸šà¸¢à¹ˆà¸­à¸¢
- **Advanced Analytics** - à¹€à¸à¸´à¹ˆà¸¡ ML/AI à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•
- **Multi-hospital** - à¸‚à¸¢à¸²à¸¢à¹„à¸›à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸­à¸·à¹ˆà¸™

---

**Document Version**: 1.0 (Simplified)  
**Target Timeline**: 3-4 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ  
**Complexity Level**: â­â­ (à¹€à¸šà¸² - à¸›à¸²à¸™à¸à¸¥à¸²à¸‡)  
**Future-ready**: âœ… (à¸à¸£à¹‰à¸­à¸¡à¸‚à¸¢à¸²à¸¢)